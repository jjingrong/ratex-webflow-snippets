$(function(){function a(){N.setAttribute("disabled",!0),O.setAttribute("disabled",!0)}function b(){N.removeAttribute("disabled"),O.removeAttribute("disabled"),O.value=ja}function c(ra){S.textContent=ra,R.style.display="block",b()}function d(){R.style.display="none",O.value=O.dataset.wait,a()}function f(){Q.style.display="block",M.style.display="none"}function g(){U.removeAttribute("disabled"),V.removeAttribute("disabled")}function h(){W.setAttribute("disabled",!0),W.style.backgroundImage="linear-gradient(90deg, grey, grey, grey)"}function i(){W.removeAttribute("disabled"),W.style.backgroundImage=null}function j(ra){W.value=0<ra?ka.trim()+" ("+(ra+")"):ka}function k(){U.setAttribute("disabled",!0),V.setAttribute("disabled",!0),W.setAttribute("disabled",!0)}function l(){U.removeAttribute("disabled"),V.removeAttribute("disabled"),W.removeAttribute("disabled"),W.value=ka}function m(ra){_.textContent=ra,Z.style.display="block",l()}function n(){X.style.display="block"}function o(){Z.style.display="none",W.value=W.dataset.wait,k()}function p(){X.style.display=null}function r(){ca.removeAttribute("disabled"),ca.removeAttribute("disabled"),da.value=la}function s(){ga.style.display="block"}function t(){ca.setAttribute("disable",!0),da.setAttribute("disable",!0),da.value=da.dataset.wait}function u(ra){ia.textContent=ra,ha.style.display="block",r()}function v(){ga.style.display=null}function w(ra){aa.textContent=na.join(ra)}function x(){ea.style.pointerEvents="none",ea.style.color="lightgrey"}function y(){ea.style.pointerEvents=null,ea.style.color=null}function z(ra){ea.textContent=0<ra?oa+" ("+ra+")":oa}function A(ra){return /^[a-zA-Z]+(\s?[a-zA-Z])*$/.test(ra)}function B(ra){return /^[9863]\d{7}$/.test(ra)}function C(ra,sa,ta){function ua(za){h(),j(za),x(),z(za)}function va(za){z(za),j(za)}function wa(){i(),y()}if(!qa){var xa=30;qa=!0,ua(xa),"function"==typeof ra&&ra(xa);var ya=setInterval(function(){xa--,va(xa),"function"==typeof sa&&sa(xa),0>=xa&&(qa=!1,clearInterval(ya),wa(xa),"function"==typeof ta&&ta(xa))},1e3)}}var E=function(ra){var sa={};return ra.replace(/([^?=&]+)(=([^&]*))?/g,function(ta,ua,va,wa){sa[ua]=wa}),sa}(window.location.search),F="https://staging.ratex.co/api/",H="Oops! Something went wrong. Please try again!",M=document.getElementById("wf-form-enter-email"),N=document.getElementById("input-email"),O=document.getElementById("submit-email"),P=M.parentNode,Q=P.querySelector(".w-form-done"),R=P.querySelector(".w-form-fail"),S=R.querySelector("div"),T=document.getElementById("wf-form-enter-phone-number"),U=document.getElementById("input-name"),V=document.getElementById("input-phone-number"),W=document.getElementById("submit-phone-number"),X=T.parentNode,Y=X.querySelector(".w-form-done"),Z=X.querySelector(".w-form-fail"),_=Z.querySelector("div"),aa=document.getElementById("text-otp"),ba=document.getElementById("wf-form-enter-otp"),ca=document.getElementById("input-otp"),da=document.getElementById("submit-otp"),ea=document.getElementById("link-resend-otp"),fa=document.getElementById("link-reenter-phone"),ga=ba.parentNode,ha=ga.querySelector(".w-form-fail"),ia=ha.querySelector("div"),ja=O.value,ka=W.value,la=da.value,ma=aa.textContent,na=ma.split("{{PHONE_NUMBER}}"),oa=ea.textContent,pa,qa=!1;M.onclick=function(ra){if(N.checkValidity()){ra.preventDefault();var sa={email:N.value};E.r&&(sa.referrer=E.r),$.ajax({method:"POST",url:F+"referral_campaign/subscribe",data:sa}).done(function(ta){ta.data&&ta.data.handle?window.location.href="https://ratex.webflow.io/rates-refer?h="+ta.data.handle:(f(),n())}).fail(function(ta){var ua;try{ua=JSON.parse(ta.responseText).message}catch(va){}c(ua||H)}),d()}},U.oninput=function(ra){A(ra.target.value)?ra.target.setCustomValidity(""):ra.target.setCustomValidity("Please enter a valid name.")},V.oninput=function(ra){B(ra.target.value)?ra.target.setCustomValidity(""):ra.target.setCustomValidity("Please enter a valid phone number.")},W.onclick=function(ra){if(U.checkValidity()&&V.checkValidity()){ra.preventDefault();var sa={email:N.value,name:U.value,phone_no:V.value};E.r&&(sa.referrer=E.r),$.ajax({method:"POST",url:F+"referral_campaign",data:sa}).done(function(ta){pa=ta.data.token_id,p(),w(sa.phone_no),s(),C()}).fail(function(ta){var ua;try{ua=JSON.parse(ta.responseText).message}catch(va){}m(ua||H)}),o()}},da.onclick=function(ra){var sa=ca.value;if(sa){ra.preventDefault();var ta={email:N.value,name:U.value,phone_no:V.value,token:ca.value,token_id:pa};E.r&&(ta.referrer=E.r),$.ajax({method:"POST",url:F+"referral_campaign",data:ta}).done(function(ua){var va=ua.data.handle;window.location.href="https://ratex.webflow.io/rates-refer?h="+va}).fail(function(ua){ca.value="";var va;try{va=JSON.parse(ua.responseText).message}catch(wa){}u(va||H)}),t()}},ea.onclick=function(){var ra={email:N.value,name:U.value,phone_no:V.value};E.r&&(ra.referrer=E.r),$.ajax({method:"POST",url:F+"referral_campaign",data:ra}).done(function(sa){pa=sa.data.token_id,p(),w(ra.phone_no),s(),C()}).fail(function(sa){y(),ea.textContent=oa;var ta;try{ta=JSON.parse(sa.responseText).message}catch(ua){}u(ta||H)}),x(),ea.textContent="Resending.."},fa.onclick=function(){v(),n(),g()}});