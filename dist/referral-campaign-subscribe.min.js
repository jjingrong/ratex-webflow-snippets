$(function(){function a(){N.setAttribute("disabled",!0),O.setAttribute("disabled",!0)}function b(){N.removeAttribute("disabled"),O.removeAttribute("disabled"),O.value=ja}function c(qa){S.textContent=qa,R.style.display="block",b()}function d(){R.style.display="none",O.value=O.dataset.wait,a()}function f(){Q.style.display="block",M.style.display="none"}function g(){U.removeAttribute("disabled"),V.removeAttribute("disabled")}function h(){W.setAttribute("disabled",!0),W.style.backgroundImage="linear-gradient(90deg, grey, grey, grey)"}function i(){W.removeAttribute("disabled"),W.style.backgroundImage=null}function j(qa){W.value=0<qa?ka.trim()+" ("+(qa+")"):ka}function k(){U.setAttribute("disabled",!0),V.setAttribute("disabled",!0),W.setAttribute("disabled",!0)}function l(){U.removeAttribute("disabled"),V.removeAttribute("disabled"),W.removeAttribute("disabled"),W.value=ka}function m(qa){_.textContent=qa,Z.style.display="block",l()}function n(){X.style.display="block"}function o(){Z.style.display="none",W.value=W.dataset.wait,k()}function p(){X.style.display=null}function r(){ca.removeAttribute("disabled"),ca.removeAttribute("disabled"),da.value=la}function s(){ga.style.display="block"}function t(){ca.setAttribute("disable",!0),da.setAttribute("disable",!0),da.value=da.dataset.wait}function u(qa){ia.textContent=qa,ha.style.display="block",r()}function v(){ga.style.display=null}function w(qa){aa.textContent=na.join(qa)}function x(){ea.style.pointerEvents="none",ea.style.color="lightgrey"}function y(){ea.style.pointerEvents=null,ea.style.color=null}function z(qa){ea.textContent=0<qa?oa+" ("+qa+")":oa}function A(qa){return /^[a-zA-Z]+(\s?[a-zA-Z])*$/.test(qa)}function B(qa){return /^[9863]\d{7}$/.test(qa)}function C(qa,ra,sa){function ta(ya){h(),j(ya),x(),z(ya)}function ua(ya){z(ya),j(ya)}function va(){i(),y()}if(!pa){var wa=30;pa=!0,ta(wa),"function"==typeof qa&&qa(wa);var xa=setInterval(function(){wa--,ua(wa),"function"==typeof ra&&ra(wa),0>=wa&&(pa=!1,clearInterval(xa),va(wa),"function"==typeof sa&&sa(wa))},1e3)}}$.ajaxSetup({crossDomain:!0,xhrFields:{withCredentials:!0}});var E=function(qa){var ra={};return qa.replace(/([^?=&]+)(=([^&]*))?/g,function(sa,ta,ua,va){ra[ta]=va}),ra}(window.location.search),F="https://staging.ratex.co/api/",H="Oops! Something went wrong. Please try again!",M=document.getElementById("wf-form-enter-email"),N=document.getElementById("input-email"),O=document.getElementById("submit-email"),P=M.parentNode,Q=P.querySelector(".w-form-done"),R=P.querySelector(".w-form-fail"),S=R.querySelector("div"),T=document.getElementById("wf-form-enter-phone-number"),U=document.getElementById("input-name"),V=document.getElementById("input-phone-number"),W=document.getElementById("submit-phone-number"),X=T.parentNode,Y=X.querySelector(".w-form-done"),Z=X.querySelector(".w-form-fail"),_=Z.querySelector("div"),aa=document.getElementById("text-otp"),ba=document.getElementById("wf-form-enter-otp"),ca=document.getElementById("input-otp"),da=document.getElementById("submit-otp"),ea=document.getElementById("link-resend-otp"),fa=document.getElementById("link-reenter-phone"),ga=ba.parentNode,ha=ga.querySelector(".w-form-fail"),ia=ha.querySelector("div"),ja=O.value,ka=W.value,la=da.value,ma=aa.textContent,na=ma.split("{{PHONE_NUMBER}}"),oa=ea.textContent;E.m;var pa=!1;M.onclick=function(qa){if(N.checkValidity()){qa.preventDefault();var ra={email:N.value};E.r&&(ra.referrer=E.r),$.ajax({method:"POST",url:F+"referral_campaign/subscribe",data:ra}).done(function(sa){sa.data&&sa.data.handle?window.location.href="https://ratex.webflow.io/rates-refer?h="+sa.data.handle:(f(),n())}).fail(function(sa){var ta;try{ta=JSON.parse(sa.responseText).message}catch(ua){}c(ta||H)}),d()}},U.oninput=function(qa){A(qa.target.value)?qa.target.setCustomValidity(""):qa.target.setCustomValidity("Please enter a valid name.")},V.oninput=function(qa){B(qa.target.value)?qa.target.setCustomValidity(""):qa.target.setCustomValidity("Please enter a valid phone number.")},W.onclick=function(qa){if(U.checkValidity()&&V.checkValidity()){qa.preventDefault();var ra={email:N.value,name:U.value,phone_no:V.value};E.r&&(ra.referrer=E.r),$.ajax({method:"POST",url:F+"referral_campaign",data:ra}).done(function(){p(),w(ra.phone_no),s(),C()}).fail(function(sa){var ta;try{ta=JSON.parse(sa.responseText).message}catch(ua){}m(ta||H)}),o()}},da.onclick=function(qa){var ra=ca.value;if(ra){qa.preventDefault();var sa={email:N.value,name:U.value,phone_no:V.value,token:ca.value};E.r&&(sa.referrer=E.r),$.ajax({method:"POST",url:F+"referral_campaign",data:sa}).done(function(ta){var ua=ta.data.handle;window.location.href="https://ratex.webflow.io/rates-refer?h="+ua}).fail(function(ta){ca.value="";var ua;try{ua=JSON.parse(ta.responseText).message}catch(va){}u(ua||H)}),t()}},ea.onclick=function(){var qa={email:N.value,name:U.value,phone_no:V.value};E.r&&(qa.referrer=E.r),$.ajax({method:"POST",url:F+"referral_campaign",data:qa}).done(function(){p(),w(qa.phone_no),s(),C()}).fail(function(ra){y(),ea.textContent=oa;var sa;try{sa=JSON.parse(ra.responseText).message}catch(ta){}u(sa||H)}),x(),ea.textContent="Resending.."},fa.onclick=function(){v(),n(),g()}});