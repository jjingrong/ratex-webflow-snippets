"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;} class ShippingTracker{constructor(){_defineProperty(this,"toggleItemProcessingActive",()=>{$(this.steppersDom.processing.inactive).css('display','none');$(this.steppersDom.processing.active).css('display','flex');});_defineProperty(this,"toggleItemShippedActive",()=>{$(this.steppersDom.shipped.inactive).css('display','none');$(this.steppersDom.shipped.active).css('display','flex');});_defineProperty(this,"toggleItemReachedWarehouseActive",()=>{$(this.steppersDom.reachedWarehouse.inactive).css('display','none');$(this.steppersDom.reachedWarehouse.active).css('display','flex');});_defineProperty(this,"toggleItemDeliveringActive",()=>{$(this.steppersDom.delivering.inactive).css('display','none');$(this.steppersDom.delivering.active).css('display','flex');});_defineProperty(this,"toggleItemDeliveredActive",()=>{$(this.steppersDom.delivered.inactive).css('display','none');$(this.steppersDom.delivered.active).css('display','flex');});_defineProperty(this,"handleItemCancelledEvent",()=>{Object.keys(this.steppersDom).forEach(key=>{$(this.steppersDom[key].active).css('display','none');$(this.steppersDom[key].inactive).css('display','none');});$(this.steppersDom.cancelled.active).css('display','flex');});_defineProperty(this,"toggleItemIsReturned",()=>{$(this.steppersDom.returned.active).css('display','flex');});_defineProperty(this,"updateStatusBox",(status,collectionMethod,collectionAmount,awbMinDuration,awbMaxDuration,deliveryMinDuration,deliveryMaxDuration,orderId,orderedAt)=>{const statusString=this.statusStringMapper[status];$('#item-status').html(statusString);const orderAndItemId=`#${orderId}`;$('#item-ID').html(`#${orderId}`);$('#Copy-Button').css('display','flex');$('#Copy-Button').click(()=>{$('#Copy-Button').text('TERSALIN');this.writeText(orderAndItemId);setTimeout(()=>{$('#Copy-Button').text('SALIN');},2000);});if(deliveryMinDuration&&deliveryMaxDuration){$('#Lastmile-Estimate-Wrapper').css('display','block');const lastMileMinDate=new Date(orderedAt);lastMileMinDate.setDate(lastMileMinDate.getDate()+deliveryMinDuration);const lastMileMaxDate=new Date(orderedAt);lastMileMaxDate.setDate(lastMileMaxDate.getDate()+deliveryMaxDuration);if(Date.now()>Date.parse(lastMileMaxDate)){$('#Lastmile-Estimate').html(`Maaf,pengiriman anda tertunda`);}else{$('#Lastmile-Estimate').html(`${lastMileMinDate.toLocaleDateString('id-ID',{day:'numeric',month:'short',year:"numeric"})}-${lastMileMaxDate.toLocaleDateString('id-ID',{day:'numeric',month:'short',year:"numeric"})}`);}}else{if(awbMinDuration&&awbMaxDuration){$('#AWB-Estimate-Wrapper').css('display','block');const awbMinDate=new Date(orderedAt);awbMinDate.setDate(awbMinDate.getDate()+awbMinDuration);const awbMaxDate=new Date(orderedAt);awbMaxDate.setDate(awbMaxDate.getDate()+awbMaxDuration);if(Date.now()>Date.parse(awbMaxDate)){$('#AWB-Estimate').html(`Maaf,pengiriman anda tertunda`);}else{$('#AWB-Estimate').html(`${awbMinDate.toLocaleDateString('id-ID',{day:'numeric',month:'short',year:"numeric"})}-${awbMaxDate.toLocaleDateString('id-ID',{day:'numeric',month:'short',year:"numeric"})}`);}}} if(collectionMethod==='COD'){$('#Payment-Method').html('Cash on Delivery');$('#Amount-to-pay-header').css('display','flex');$('#Amount-To-Pay').css('display','flex');$('#Amount-To-Pay').html(this.convertToRupiah(collectionAmount));}else{$('#Payment-Method').html('Pembayaran Online');}});_defineProperty(this,"updateShippingInfo",(courier,trackingRef,url)=>{$('#Courier-Details').css('display','block');$('#courier').html(courier);$('#Courier-url').html(url);$('#Courier-url').attr("href",url);$('#Tracking-ID').html(trackingRef);$('#Copy-Button-2').click(()=>{$('#Copy-Button-2').text('TERSALIN');this.writeText(trackingRef);setTimeout(()=>{$('#Copy-Button-2').text('SALIN');},2000);});});_defineProperty(this,"fetchData",()=>{$.ajax({url:this.url,type:"GET",beforeSend:function(xhr){xhr.setRequestHeader('Accept-Language','id-ID');},success:response=>{const{status,courier,trackingRef,url,collectionAmount,collectionMethod,awbMinDuration,awbMaxDuration,deliveryMinDuration,deliveryMaxDuration,orderId,orderedAt}=response.data;this.updateStatusBox(status,collectionMethod,collectionAmount,awbMinDuration,awbMaxDuration,deliveryMinDuration,deliveryMaxDuration,orderId,orderedAt);if(trackingRef&&trackingRef.length>0&&url&&url.length>0){this.updateShippingInfo(courier,trackingRef,url);} switch(status){case 9:this.handleItemCancelledEvent();break;case 11:case 10:this.toggleItemIsReturned();case 8:this.toggleItemDeliveredActive();case 7:this.toggleItemDeliveringActive();case 6:this.toggleItemReachedWarehouseActive();case 5:case 4:case 3:this.toggleItemShippedActive();case 2:case 1:this.toggleItemProcessingActive();}},error:error=>{$('.tracking-main-body').css('display','none');$('#error-message').css('display','flex');if(this.debugMode){if(error.responseJSON){alert(error.responseJSON.message);}else{alert(error.responseText);}}}});});_defineProperty(this,"getUrlParameter",key=>{var params={};var parser=document.createElement('a');parser.href=window.location;var query=parser.search.substring(1);var vars=query.split('&');for(var i=0;i<vars.length;i++){var pair=vars[i].split('=');params[pair[0]]=decodeURIComponent(pair[1]);} return params[key];});_defineProperty(this,"convertToRupiah",x=>{const tempNum=String(x).split('').reverse();for(let i=0;i<tempNum.length;i++){if((i+1)%3===0&&i!==tempNum.length-1){tempNum[i]=`.${tempNum[i]}`;}} return`Rp&nbsp${tempNum.reverse().join('')}`;});_defineProperty(this,"writeText",str=>{return new Promise(function(resolve,reject){var range=document.createRange();range.selectNodeContents(document.body);document.getSelection().addRange(range);var success=false;function listener(e){e.clipboardData.setData("text/plain",str);e.preventDefault();success=true;} document.addEventListener("copy",listener);document.execCommand("copy");document.removeEventListener("copy",listener);document.getSelection().removeAllRanges();success?resolve():reject();});});this.steppersDom={processing:{inactive:'#item-processing-inactive',active:'#item-processing-active'},shipped:{inactive:'#item-shipped-inactive',active:'#item-shipped-active'},reachedWarehouse:{inactive:'#item-reached-warehouse-inactive',active:'#item-reached-warehouse-active'},delivering:{inactive:'#item-delivering-inactive',active:'#item-delivering-active'},delivered:{inactive:'#item-delivered-inactive',active:'#item-delivered-active'},cancelled:{active:'#item-cancelled-active',inactive:''},returned:{active:'#item-returned-active',inactive:''}};this.statusStringMapper={1:"Sedang Diproses",2:"Sedang Diproses",3:"Sedang Diproses",4:"Sedang Diproses",5:"Dikirim",6:"Pesanan tiba di gudang",7:"Pesanan dikirim",8:"Pesanan selesai",9:"Dibatalkan",10:"Pesanan selesai",11:"Pesanan selesai"};this.itemId=this.getUrlParameter('i');this.debugMode=this.getUrlParameter('debug');var isStaging=location.host==='rates-reseller.webflow.io';this.url=`https:this.fetchData();}} new ShippingTracker();